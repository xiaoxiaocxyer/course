"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var utils=require('./utils'),constants=require('./constants');require("echarts/lib/chart/sankey");var Core=_interopDefault(require('./core')),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function getTooltip(e){var t=e.itemDataType,n=e.linksDataType,i=e.digit;return{trigger:"item",formatter:function(e){var a=[],r=e.name,l=e.data,s=e.value,u=e.color;return a.push(constants.itemPoint(u)),a.push(r+" : "),l&&l.source?a.push(utils.getFormated(s,n,i)+"<br />"):a.push(utils.getFormated(s,t,i)+"<br />"),a.join("")}}}function getSeries(e){var t=e.rows,n=e.dimension,i=e.metrics,a=e.links,r=e.valueFull,l=e.useDataValue,s=e.label,u=e.itemStyle,o=e.lineStyle,d={},c={type:"sankey",data:t.map(function(e){return d[e[n]]=e[i],{name:e[n],value:e[i]}}),links:l?a.map(function(e){return _extends({},e,{value:d[e.target]})}):r?a:a.map(function(e){return null==e.value?_extends({},e,{value:d[e.target]}):e})};return s&&(c.label=s),u&&(c.itemStyle=u),o&&(c.lineStyle=o),[c]}var sankey$1=function(e,t,n,i){var a=n.links,r=n.dimension,l=void 0===r?e[0]:r,s=n.metrics,u=void 0===s?e[1]:s,o=n.dataType,d=void 0===o?["normal","normal"]:o,c=n.digit,m=void 0===c?2:c,v=n.valueFull,p=void 0!==v&&v,y=n.useDataValue,f=void 0!==y&&y,g=n.label,k=n.itemStyle,S=n.lineStyle;if(a)return{tooltip:getTooltip({itemDataType:d[0],linksDataType:d[1],digit:m}),series:getSeries({rows:t,dimension:l,metrics:u,links:a,valueFull:p,useDataValue:f,label:g,itemStyle:k,lineStyle:S})};console.warn("links is needed in settings!")},index=_extends({},Core,{name:"VeSankey",data:function(){return this.chartHandler=sankey$1,{}}});module.exports=index;
