"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var constants=require('./constants'),utils=require('./utils');require("echarts/lib/chart/radar");var Core=_interopDefault(require('./core'));function getRadarLegend(e,t,a){return{data:e.map(function(e){return e[t]}),formatter:function(e){return null!=a[e]?a[e]:e}}}function getRadarTooltip(e,t,a){var r=[],n=[];return t.indicator.map(function(t,a){r[a]=e[t.name],n[a]=t.name}),{formatter:function(e){var t=[];return t.push(constants.itemPoint(e.color)),t.push(e.name+"<br />"),e.data.value.forEach(function(e,i){t.push(n[i]+": "),t.push(utils.getFormated(e,r[i],a)+"<br />")}),t.join("")}}}function getRadarSetting(e,t,a){var r={indicator:[],shape:"circle",splitNumber:5},n={};return e.forEach(function(e){t.forEach(function(t){var r=null!=a[t]?a[t]:t;n[r]?n[r].push(e[t]):n[r]=[e[t]]})}),r.indicator=Object.keys(n).map(function(e){return{name:e,max:Math.max.apply(null,n[e])}}),r}function getRadarSeries(e){var t=e.rows,a=e.dimension,r=e.metrics,n=e.radar,i=e.label,o=e.itemStyle,l=e.lineStyle,u=e.labelMap,c=e.areaStyle,d={};n.indicator.forEach(function(e,t){var a=e.name;d[a]=t});var s=t.map(function(e){var t={value:[],name:e[a]};return Object.keys(e).forEach(function(a){if(~r.indexOf(a)){var n=null!=u[a]?d[u[a]]:d[a];t.value[n]=e[a]}}),t}),f={name:a,type:"radar",data:s};return i&&(f.label=i),o&&(f.itemStyle=o),l&&(f.lineStyle=l),c&&(f.areaStyle=c),[f]}var radar$1=function(e,t,a,r){var n=a.dataType,i=void 0===n?{}:n,o=a.legendName,l=void 0===o?{}:o,u=a.labelMap,c=void 0===u?{}:u,d=a.dimension,s=void 0===d?e[0]:d,f=a.digit,m=void 0===f?2:f,p=a.label,v=a.itemStyle,y=a.lineStyle,g=a.areaStyle,b=r.tooltipVisible,h=r.legendVisible,S=e.slice();a.metrics?S=a.metrics:S.splice(e.indexOf(s),1);var x=h&&getRadarLegend(t,s,l),R=getRadarSetting(t,S,c);return{legend:x,tooltip:b&&getRadarTooltip(i,R,m),radar:R,series:getRadarSeries({rows:t,dimension:s,metrics:S,radar:R,label:p,itemStyle:v,lineStyle:y,labelMap:c,areaStyle:g})}},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},index=_extends({},Core,{name:"VeRadar",data:function(){return this.chartHandler=radar$1,{}}});module.exports=index;
